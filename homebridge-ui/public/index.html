<button class="btn btn-primary" onclick="findWiserDevice()">Find Wiser device</button>
<button class="btn btn-primary" onclick="requestAccessToken()">Request Access Token</button>

<script>
    var configs = [];
    homebridge.showSpinner();

    homebridge.addEventListener('ready', () => {
      configs = homebridge.getPluginConfig().then((result) => {
        configs = result;
      }
      );

      homebridge.hideSpinner();
      homebridge.showSchemaForm();


      findWiserDevice = () => {
        homebridge.showSpinner();
        homebridge.request('/findWiserDevice').then(
          (response) => {
            configs[0].ip = response.addresses[0];
            homebridge.updatePluginConfig(configs).then(() => {
              homebridge.hideSpinner()
            });
          },
          (error) => {
            homebridge.toast.error("wiser device not found", "no device found");
            homebridge.hideSpinner();
          }
        );

      };

      requestAccessToken = () => {
        homebridge.showSpinner();
        homebridge.request('/getAuthToken', configs[0].ip).then( (response) => {

        });

      };
    });

    homebridge.addEventListener('mdns-log', (service) => {
      console.log("service discovered:" , service.data);
    })


</script>